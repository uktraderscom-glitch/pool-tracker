<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pool League Tracker — Spot On Sheriff</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: #333; color: white; padding: 10px; }
    nav { display: flex; background: #444; }
    nav button {
      flex: 1; padding: 10px; border: none;
      background: #444; color: white; cursor: pointer;
    }
    nav button.active { background: #666; }
    section { display: none; padding: 20px; }
    section.active { display: block; }

    input[type=text], input[type=number], select {
      padding: 5px; margin: 5px 0; width: 200px;
    }
    .btn { padding: 6px 12px; margin: 5px; cursor: pointer; }
    .btn-primary { background: #28a745; color: white; border: none; }
    .btn-danger { background: #dc3545; color: white; border: none; }
    .btn-edit { background: #007bff; color: white; border: none; }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    table, th, td { border: 1px solid #888; }
    th, td { padding: 8px; text-align: left; }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center; justify-content: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 4px;
      width: 300px;
    }
  </style>
</head>
<body>

<header>
  <h1>Pool League Tracker — Spot On Sheriff</h1>
</header>

<nav>
  <button id="tabSeasons" class="active">Seasons</button>
  <button id="tabPlayers">Players</button>
  <button id="tabTeams">Teams</button>
  <button id="tabMatches">Record Match</button>
  <button id="tabStats">Stats</button>
</nav>

<section id="sectionSeasons" class="active">
  <h2>Seasons</h2>
  <form id="formSeason">
    <label>Season Name:<br/><input type="text" id="seasonName" required /></label><br/>
    <label>Frames per Match:<br/><input type="number" id="framesPerMatch" min="1" required /></label><br/>
    <button class="btn btn-primary" type="submit">Add Season</button>
  </form>
  <h3>Existing Seasons</h3>
  <table id="tableSeasons">
    <thead><tr><th>Name</th><th>Frames</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>
</section>

<section id="sectionPlayers">
  <h2>Players</h2>
  <form id="formPlayer">
    <label>Full Name:<br/><input type="text" id="playerName" required /></label><br/>
    <label>Team:<br/><input type="text" id="playerTeam" required /></label><br/>
    <label>Standard:<br/>
      <select id="playerStandard" required>
        <option value="">Select</option>
        <option value="A+">A+</option>
        <option value="A">A</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B">B</option>
        <option value="B-">B-</option>
        <option value="C+">C+</option>
        <option value="C">C</option>
        <option value="C-">C-</option>
      </select>
    </label><br/>
    <label>Season:<br/>
      <select id="playerSeason" required></select>
    </label><br/>
    <button class="btn btn-primary" type="submit">Add Player</button>
  </form>

  <h3>All Players</h3>
  <table id="tablePlayers">
    <thead><tr><th>Name</th><th>Team</th><th>Standard</th><th>Season</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>
</section>

<section id="sectionTeams">
  <h2>Teams</h2>
  <p>(Teams functionality coming soon.)</p>
</section>

<section id="sectionMatches">
  <h2>Record Match</h2>
  <p>(Match recording functionality coming soon.)</p>
</section>

<section id="sectionStats">
  <h2>Stats</h2>
  <p>(Stats functionality coming soon.)</p>
</section>

<!-- Edit Player Modal -->
<div id="editModal" class="modal">
  <div class="modal-content">
    <h3>Edit Player (Adds New Entry)</h3>
    <label>Team:<br/><input type="text" id="editPlayerTeam" required /></label><br/>
    <label>Standard:<br/>
      <select id="editPlayerStandard" required>
        <option value="">Select</option>
        <option value="A+">A+</option>
        <option value="A">A</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B">B</option>
        <option value="B-">B-</option>
        <option value="C+">C+</option>
        <option value="C">C</option>
        <option value="C-">C-</option>
      </select>
    </label><br/>
    <label>Season:<br/><select id="editPlayerSeason" required></select></label><br/>
    <button id="btnSaveEdit" class="btn btn-primary">Save</button>
    <button id="btnCancelEdit" class="btn btn-danger">Cancel</button>
  </div>
</div>

<script>
(function(){
  const tabs = {
    tabSeasons: 'sectionSeasons',
    tabPlayers: 'sectionPlayers',
    tabTeams: 'sectionTeams',
    tabMatches: 'sectionMatches',
    tabStats: 'sectionStats'
  };
  Object.keys(tabs).forEach(tabId => {
    document.getElementById(tabId).addEventListener('click', () => {
      Object.keys(tabs).forEach(tid => {
        document.getElementById(tid).classList.remove('active');
        document.getElementById(tabs[tid]).classList.remove('active');
      });
      document.getElementById(tabId).classList.add('active');
      document.getElementById(tabs[tabId]).classList.add('active');
    });
  });

  let data = { seasons: [], players: [] };
  const storageKey = 'poolTrackerData';

  function saveData(){
    localStorage.setItem(storageKey, JSON.stringify(data));
  }
  function loadData(){
    const d = localStorage.getItem(storageKey);
    if (d){
      try { data = JSON.parse(d); }
      catch(e){ data = { seasons: [], players: [] }; }
    }
  }

  function preloadData(){
    const seasonName = "PREM 25/26 SUMMER";
    const framesDefault = 15;
    if (!data.seasons.some(s => s.name === seasonName)){
      data.seasons.push({ name: seasonName, frames: framesDefault });
    }
    const playersToAdd = [
      // SPOT ON SHERIFF
      { name:"Katt Singh", team:"SPOT ON SHERIFF", standard:"B+", season:seasonName },
      { name:"Clyde Doyle", team:"SPOT ON SHERIFF", standard:"A-", season:seasonName },
      { name:"Lacky Singh", team:"SPOT ON SHERIFF", standard:"B", season:seasonName },
      { name:"Michael Singh", team:"SPOT ON SHERIFF", standard:"B", season:seasonName },
      { name:"Nirm Singh", team:"SPOT ON SHERIFF", standard:"B-", season:seasonName },
      { name:"Audie Miller", team:"SPOT ON SHERIFF", standard:"A-", season:seasonName },
      { name:"Ilias Mou", team:"SPOT ON SHERIFF", standard:"B", season:seasonName },
      { name:"Jay Smith", team:"SPOT ON SHERIFF", standard:"A-", season:seasonName },
      { name:"Tim Chambers", team:"SPOT ON SHERIFF", standard:"B-", season:seasonName },
      { name:"Joe Crespo", team:"SPOT ON SHERIFF", standard:"B", season:seasonName },
      { name:"Joe Reynolds", team:"SPOT ON SHERIFF", standard:"A-", season:seasonName },
      { name:"Clint I'Anson", team:"SPOT ON SHERIFF", standard:"A+", season:seasonName },
      { name:"Dom Camara", team:"SPOT ON SHERIFF", standard:"B", season:seasonName },

      // SPOT ON HUCKNALL
      { name:"Steve Jones", team:"SPOT ON HUCKNALL", standard:"B", season:seasonName },
      { name:"Martin Harper", team:"SPOT ON HUCKNALL", standard:"B-", season:seasonName },
      { name:"Gary Newton", team:"SPOT ON HUCKNALL", standard:"B-", season:seasonName },
      { name:"Graham Turnbull", team:"SPOT ON HUCKNALL", standard:"B+", season:seasonName },
      { name:"Tim Hudson", team:"SPOT ON HUCKNALL", standard:"B", season:seasonName },
      { name:"Ian Owen", team:"SPOT ON HUCKNALL", standard:"B", season:seasonName },
      { name:"Mark Snowshall", team:"SPOT ON HUCKNALL", standard:"B", season:seasonName },

      // THE LIMEKILN
      { name:"Dale Mellor", team:"THE LIMEKILN", standard:"B+", season:seasonName },
      { name:"Arron Priest", team:"THE LIMEKILN", standard:"A-", season:seasonName },
      { name:"Lee Pickard", team:"THE LIMEKILN", standard:"B+", season:seasonName },
      { name:"Lee Howitt", team:"THE LIMEKILN", standard:"A-", season:seasonName },
      { name:"Paul Riley", team:"THE LIMEKILN", standard:"A-", season:seasonName },
      { name:"David Casey", team:"THE LIMEKILN", standard:"A-", season:seasonName },
      { name:"Jordan Geldard", team:"THE LIMEKILN", standard:"B+", season:seasonName },
      { name:"Sam Burton", team:"THE LIMEKILN", standard:"B+", season:seasonName },
      { name:"Shane Wood", team:"THE LIMEKILN", standard:"B", season:seasonName },
      { name:"Darren Golding", team:"THE LIMEKILN", standard:"B", season:seasonName },
      { name:"Pat Kelley", team:"THE LIMEKILN", standard:"B", season:seasonName },
      { name:"Neil Kelly", team:"THE LIMEKILN", standard:"B", season:seasonName },

      // BESTWOOD ROAD
      { name:"Richard Deakin", team:"BESTWOOD ROAD", standard:"B+", season:seasonName },
      { name:"Allen Shaw", team:"BESTWOOD ROAD", standard:"B", season:seasonName },
      { name:"Dillon Robinson", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Gary Stout", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Gary Harvey", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Steve Clark", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Raymond Oldham", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Ed Clark", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },
      { name:"Aiden Hewes", team:"BESTWOOD ROAD", standard:"B-", season:seasonName },

      // VICTORY STORMS
      { name:"Ryan Norris", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Danny Butler", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"David Oxtoby", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Andy Wilson", team:"VICTORY STORMS", standard:"A-", season:seasonName },
      { name:"Matt Fell", team:"VICTORY STORMS", standard:"B", season:seasonName },
      { name:"Tim Hurst", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Tom Laycock", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Corey Blackshaw", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Martin Elks", team:"VICTORY STORMS", standard:"B+", season:seasonName },
      { name:"Tyler Butler", team:"VICTORY STORMS", standard:"B", season:seasonName },
      { name:"Jimmy Hallam", team:"VICTORY STORMS", standard:"B", season:seasonName },
      { name:"Greg Davis", team:"VICTORY STORMS", standard:"A", season:seasonName },

      // WILLOW TREE
      { name:"Michael Baguley", team:"WILLOW TREE", standard:"B-", season:seasonName },
      { name:"Joe Cammack", team:"WILLOW TREE", standard:"B+", season:seasonName },
      { name:"Charnce Froome", team:"WILLOW TREE", standard:"B", season:seasonName },
      { name:"Lee Rust", team:"WILLOW TREE", standard:"B", season:seasonName },
      { name:"William Morgan", team:"WILLOW TREE", standard:"B-", season:seasonName },
      { name:"Ben Kosneisky", team:"WILLOW TREE", standard:"B-", season:seasonName },
      { name:"Jason Ward", team:"WILLOW TREE", standard:"B", season:seasonName },
      { name:"Loz Sanderson", team:"WILLOW TREE", standard:"B", season:seasonName }
    ];
    playersToAdd.forEach(p => {
      if (!data.players.some(x => x.name === p.name && x.team === p.team && x.season === p.season && x.standard === p.standard)){
        data.players.push(p);
      }
    });
  }

  // --- Initialize UI Controls ---
  const formSeason = document.getElementById('formSeason');
  const tableSeasonsBody = document.getElementById('tableSeasons').querySelector('tbody');
  const formPlayer = document.getElementById('formPlayer');
  const playerSeasonSelect = document.getElementById('playerSeason');
  const tablePlayersBody = document.getElementById('tablePlayers').querySelector('tbody');
  const editModal = document.getElementById('editModal');
  let editIndex = null;

  function refreshPlayerSeasonDropdowns(){
    playerSeasonSelect.innerHTML = '';
    const editSeasonSelect = document.getElementById('editPlayerSeason');
    editSeasonSelect.innerHTML = '';
    if (data.seasons.length === 0){
      const opt = document.createElement('option'); opt.value=''; opt.textContent='No seasons available';
      playerSeasonSelect.appendChild(opt); editSeasonSelect.appendChild(opt.cloneNode(true));
      return;
    }
    data.seasons.forEach(s=>{
      const opt = document.createElement('option');
      opt.value = s.name; opt.textContent = s.name;
      playerSeasonSelect.appendChild(opt);
      editSeasonSelect.appendChild(opt.cloneNode(true));
    });
  }

  function refreshSeasonsTable(){
    tableSeasonsBody.innerHTML = '';
    data.seasons.forEach((s, idx)=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${s.name}</td><td>${s.frames}</td><td><button class="btn btn-danger" data-index="${idx}">Delete</button></td>`;
      tableSeasonsBody.appendChild(tr);
    });
    tableSeasonsBody.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const idx = parseInt(btn.getAttribute('data-index'),10);
        data.seasons.splice(idx,1);
        saveData();
        refreshSeasonsTable();
        refreshPlayerSeasonDropdowns();
      });
    });
  }

  formSeason.addEventListener('submit',e=>{
    e.preventDefault();
    const name = document.getElementById('seasonName').value.trim();
    const frames = parseInt(document.getElementById('framesPerMatch').value,10);
    if (!name || isNaN(frames) || frames < 1){
      alert('Please enter a valid season name and frames per match.'); return;
    }
    data.seasons.push({ name:name, frames:frames});
    saveData();
    refreshSeasonsTable();
    refreshPlayerSeasonDropdowns();
    formSeason.reset();
  });

  function refreshPlayersTable(){
    tablePlayersBody.innerHTML = '';
    data.players.forEach((p, idx)=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${p.name}</td><td>${p.team}</td><td>${p.standard}</td><td>${p.season}</td><td>
        <button class="btn btn-edit" data-index="${idx}">Edit</button>
        <button class="btn btn-danger" data-index="${idx}" data-delete="true">Delete</button>
      </td>`;
      tablePlayersBody.appendChild(tr);
    });
    tablePlayersBody.querySelectorAll('button').forEach(btn=>{
      const idx = parseInt(btn.getAttribute('data-index'),10);
      if (btn.getAttribute('data-delete')){
        btn.addEventListener('click',()=>{
          data.players.splice(idx,1);
          saveData();
          refreshPlayersTable();
        });
      } else {
        btn.addEventListener('click',()=> openEditModal(idx));
      }
    });
  }

  formPlayer.addEventListener('submit',e=>{
    e.preventDefault();
    const player = {
      name: document.getElementById('playerName').value.trim(),
      team: document.getElementById('playerTeam').value.trim(),
      standard: document.getElementById('playerStandard').value,
      season: document.getElementById('playerSeason').value
    };
    if (!player.name || !player.team || !player.standard || !player.season){
      alert("All fields are required.");
      return;
    }
    data.players.push(player);
    saveData();
    refreshPlayersTable();
    formPlayer.reset();
  });

  function openEditModal(idx){
    editIndex = idx;
    const p = data.players[idx];
    document.getElementById('editPlayerTeam').value = p.team;
    document.getElementById('editPlayerStandard').value = p.standard;
    document.getElementById('editPlayerSeason').value = p.season;
    editModal.style.display = 'flex';
  }

  document.getElementById('btnCancelEdit').addEventListener('click',()=>{
    editIndex = null;
    editModal.style.display = 'none';
  });

  document.getElementById('btnSaveEdit').addEventListener('click',()=>{
    const newTeam = document.getElementById('editPlayerTeam').value.trim();
    const newStandard = document.getElementById('editPlayerStandard').value;
    const newSeason = document.getElementById('editPlayerSeason').value;
    if (!newTeam || !newStandard || !newSeason){
      alert("All fields are required for update."); return;
    }
    const original = data.players[editIndex];
    const newEntry = { name: original.name, team: newTeam, standard: newStandard, season: newSeason };
    data.players.push(newEntry);
    saveData();
    refreshPlayersTable();
    editModal.style.display = 'none';
    editIndex = null;
  });

  // Init
  loadData();
  preloadData();
  saveData();
  refreshSeasonsTable();
  refreshPlayerSeasonDropdowns();
  refreshPlayersTable();

})();
</script>

</body>
</html>
